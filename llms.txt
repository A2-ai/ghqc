# ghqc

The goal of the ghqc ecosystem is to simplify, standardize, and improve
traceability of the QC process through the use of shiny apps which
create GitHub Issues and Milestones for your project. The ghqc package
is a lightweight wrapper to be installed alongside project packages and
has three primary functionalities:

- **Isolating Package Dependency**: Installs, or symlinks, the high
  dependency burden of the ghqc shiny app ecosystem to an isolated
  directory to ensure no interference with any project work.

- **Launching Shiny Apps**: Launches the ghqc shiny apps as background
  jobs to allow for continued use of the R Console.

- **Verifying Configuring Information**: Aids in the installation and
  structure verification of the organization specific configuring
  information, such as checklists and logos.

## Installation

You can install the development version of ghqc from
[GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("a2-ai/ghqc")
```

## Interacting with ghqc

``` r
library(ghqc)
```

## Custom Configuration Repository

The ghqc ecosystem has been developed with the intent organizations can
customize elements of the QC process. Currently, the customizable
elements are:

- **Checklists**: yaml files contained within a directory named
  “checklist” *(required)*

- **Prepended Note**: A note to prepend to all checklists named “note”
  *(optional)*

- **Logo**: A logo to be included in the header of the resultant
  record’s header named as “logo.png” *(required)*

An example structure of the custom configuration repository can be found
at
[github.com/A2-ai/ghqc.example_info_repo](https://github.com/A2-ai/ghqc.example_info_repo).

## ghqc Setup

ghqc has 3 main requirements that must be met before running any of the
ghqc ecosystem apps:

1.  An environmental variable, `GHQC_CONFIG_REPO`, must be set to the
    custom configuration repository url in “~/.Renviron”.

2.  The custom configuration repository must be downloaded to a local
    location.

3.  All of the dependency packages for the ghqc shiny apps, including
    `ghqc.app` must be located in the same directory.

Within this package, a function
[`ghqc::setup_ghqc()`](https://a2-ai.github.io/ghqc/reference/setup_ghqc.md)
aids in this setup:

``` r
ghqc::setup_ghqc()
```

1.  **Renviron Setup**

Enter the url of the custom configuration repository described above.

![](reference/figures/renviron_setup.png)

2.  **Custom Configuration Download and Verification**

The custom configuration will default to installing to
“~/.local/share/ghqc/”. To download to the default location, which is
highly recommended, hit `ENTER`. Otherwise, type in the path in which to
download the repository.

In addition to downloading the repository, the structure of the
repository and the checklist yamls are verified.

![](reference/figures/info_repo_download.png)

In the case the custom configuration repository has already been
downloaded to the specified path and their are remote changes to the
repository, the user will be warned and provided the option to download
the new update.

![NOTE: This will remove all local changes to the repository and hard
reset to the content in the
remote](reference/figures/info_repo_update.png)

NOTE: This will remove all local changes to the repository and hard
reset to the content in the remote.

3.  **Shiny App Dependency Installation**

Select whether to install the dependency packages or symlink to
previously a previously installed package library.

- INSTALL PACKAGES

  - NOTE: The install option is currently only available to linux
    systems supported by Posit Package Manager (PPM) and will install
    from
    [PPM@2024-03-01](https://packagemanager.posit.co/cran/2024-03-01).

  - The dependency packages are installed by default to
    “~/.local/share/ghqc/rpkgs///”. To install to the default location,
    which is highly recommended, hit `ENTER`. Otherwise, type in the
    path in which to install the dependency packages.

  ![](reference/figures/install_depends.png)

- SYMLINK PACKAGES

  - NOTE: The link option requires all packages be installed in the same
    `link_path` AND they meet the requirements listed in the imports.

  - Provide the path to the previously installed package library.

  - The dependency packages are symlinked by default to
    “~/.local/share/ghqc/rpkgs///”. To symlink to the default location,
    which is highly recommended, hit `ENTER`. Otherwise, type in the
    path in which to download the repository.

  ![](reference/figures/link_depends.png)

#### ghqc.app installation

NOTE:
[`ghqc::ghqc_setup()`](https://a2-ai.github.io/ghqc/reference/ghqc_setup.md)
does not install the `ghqc.app` package as the distribution method
and/or required version may change based on organization needs.

You can install the development version of ghqc.app from
[GitHub](https://github.com/) with:

``` r
withr::with_options(list(repos = "https://a2-ai.r-universe.dev"), pak::pkg_install("ghqc.app", lib = ghqc::ghqc_libpath()))​
```

## ghqc shiny app launching

ghqc will start a background job to launch an app from the ghqc
ecosystem into the “Viewer” pane of your RStudio session. For technical
information regarding these apps, refer to
[ghqc.app](https://github.com/a2-ai/ghqc.app).

…

# Package index

## All functions

- [`check_ghqc_configuration()`](https://a2-ai.github.io/ghqc/reference/check_ghqc_configuration.md)
  : Check the content of the downloaded ghqc custom configuration
  repository and download any updates needed

- [`check_ghqcapp_dependencies()`](https://a2-ai.github.io/ghqc/reference/check_ghqcapp_dependencies.md)
  :

  Check the installed/linked packages in `lib_path` against the
  recommended ghqc.app dependency package version

- [`download_ghqc_configuration()`](https://a2-ai.github.io/ghqc/reference/download_ghqc_configuration.md)
  :

  Download the custom configuration repository as set in environmental
  variable `GHQC_CONFIG_REPO`

- [`format_linux_platform()`](https://a2-ai.github.io/ghqc/reference/format_linux_platform.md)
  : Find and format the linux platform string for ghqc/rpkg installation

- [`ghqc_archive_app()`](https://a2-ai.github.io/ghqc/reference/ghqc_archive_app.md)
  : Archive file(s)

- [`ghqc_assign_app()`](https://a2-ai.github.io/ghqc/reference/ghqc_assign_app.md)
  : Assign file(s) to be reviewed for QC

- [`ghqc_config_path()`](https://a2-ai.github.io/ghqc/reference/ghqc_config_path.md)
  : The default install location for the ghqc custom configuration
  repository

- [`ghqc_example_setup()`](https://a2-ai.github.io/ghqc/reference/ghqc_example_setup.md)
  : Function to set up the ghqc environment, including writing to the
  .Renviron, custom configuration repository download, ghqc.app
  dependency installation, and ghqc.app installation if available, for
  use of the ghqc application suite

- [`ghqc_libpath()`](https://a2-ai.github.io/ghqc/reference/ghqc_libpath.md)
  : The default install location for the ghqc package and its
  dependencies. If it does not exist, it will be created.

- [`ghqc_notify_app()`](https://a2-ai.github.io/ghqc/reference/ghqc_notify_app.md)
  : Comment in an Issue to display file changes during QC

- [`ghqc_record_app()`](https://a2-ai.github.io/ghqc/reference/ghqc_record_app.md)
  : Generate a QC Record for one or more Milestones

- [`ghqc_setup()`](https://a2-ai.github.io/ghqc/reference/ghqc_setup.md)
  : Interactive function to set up the ghqc environment, including
  writing to the .Renviron, custom configuration repository download,
  and ghqc.app dependency installation/linking, for use of the ghqc
  application suite

- [`ghqc_sitrep()`](https://a2-ai.github.io/ghqc/reference/ghqc_sitrep.md)
  : Situation report for ghqc set-up

- [`ghqc_status_app()`](https://a2-ai.github.io/ghqc/reference/ghqc_status_app.md)
  : Status QC file(s)

- [`install_ghqcapp_dependencies()`](https://a2-ai.github.io/ghqc/reference/install_ghqcapp_dependencies.md)
  : install ghqc.app's dependencies into an isolated library

- [`is_shiny_ready()`](https://a2-ai.github.io/ghqc/reference/is_shiny_ready.md)
  : Shiny is "ready" if the download.file is able to serve the starting
  html, at this point, we will try to hit the shiny app and see if it
  downloads

- [`link_ghqcapp_dependencies()`](https://a2-ai.github.io/ghqc/reference/link_ghqcapp_dependencies.md)
  : symlink previously installed package library containing all ghqc.app
  dependencies to an isolated package library

- [`remove_ghqc_configuration()`](https://a2-ai.github.io/ghqc/reference/remove_ghqc_configuration.md)
  :

  Remove the downloaded custom configuration repository from
  `config_path`

- [`remove_ghqcapp_dependencies()`](https://a2-ai.github.io/ghqc/reference/remove_ghqcapp_dependencies.md)
  : Remove all content in the specified lib path. Optionally removes the
  cache as well.

- [`setup_ghqc()`](https://a2-ai.github.io/ghqc/reference/setup_ghqc.md)
  : setup_ghqc

- [`setup_ghqc_renviron()`](https://a2-ai.github.io/ghqc/reference/setup_ghqc_renviron.md)
  : helper function to setup/write Renviron file for ghqc

